import{r as f,j as t,A as U,_ as b,a as _,N as E,b as L,c as K,d as W,u as F,e as Z,f as G,R as Q,g as k}from"./index.e6622529.js";import{c as X,a as Y,u as ee,m as ne,M as A,b as te,i as D,d as ie,U as B,e as se,f as x,I as M,B as P,C as ae,L as oe,g as re,A as le}from"./SvgProvider.db54e9ec.js";const ce="_Signin_15fdv_1",de="_SigninBox_15fdv_6",ue="_Header_15fdv_19",ge="_InputBox_15fdv_25",pe="_InputHolder_15fdv_32",fe="_Input_15fdv_25",me="_PrefixIcon_15fdv_48",he="_Button_15fdv_57",ve="_Suggestion_15fdv_70",_e="_SuggestionLink_15fdv_73",w={Signin:ce,SigninBox:de,Header:ue,InputBox:ge,InputHolder:pe,Input:fe,PrefixIcon:me,Button:he,Suggestion:ve,SuggestionLink:_e};var xe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"};const we=xe;var R=function(a,s){return t(U,{...b(b({},a),{},{ref:s,icon:we})})};R.displayName="LockOutlined";const j=f.exports.forwardRef(R);var Ie={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464H332V240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v68c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-68c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zm-40 376H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"unlock",theme:"outlined"};const Se=Ie;var z=function(a,s){return t(U,{...b(b({},a),{},{ref:s,icon:Se})})};z.displayName="UnlockOutlined";const Ve=f.exports.forwardRef(z),$=X(Y);function ye(n){const a=ee(()=>ne(n)),{isStatic:s}=f.exports.useContext(A);if(s){const[,d]=f.exports.useState(n);f.exports.useEffect(()=>a.onChange(d),[])}return a}function Ne(n,a){te(()=>{if(D(n))return n.onChange(a)},[a])}function He(n,a={}){const{isStatic:s}=f.exports.useContext(A),d=f.exports.useRef(null),u=ye(D(n)?n.get():n);return f.exports.useMemo(()=>u.attach((h,r)=>s?r(h):(d.current&&d.current.stop(),d.current=ie({from:u.get(),to:h,velocity:u.getVelocity(),...a,onUpdate:r}),u.get())),[JSON.stringify(a)]),Ne(n,h=>u.set(parseFloat(h))),u}const Le=n=>typeof n=="function";function be(n,a){var s;return typeof n=="string"?a?((s=a[n])!==null&&s!==void 0||(a[n]=document.querySelectorAll(n)),n=a[n]):n=document.querySelectorAll(n):n instanceof Element&&(n=[n]),Array.from(n||[])}const Me={any:0,all:1};function ke(n,a,{root:s,margin:d,amount:u="any"}={}){if(typeof IntersectionObserver>"u")return()=>{};const h=be(n),r=new WeakMap,H=N=>{N.forEach(v=>{const I=r.get(v.target);if(v.isIntersecting!==Boolean(I))if(v.isIntersecting){const g=a(v);Le(g)?r.set(v.target,g):y.unobserve(v.target)}else I&&(I(v),r.delete(v.target))})},y=new IntersectionObserver(H,{root:s,rootMargin:d,threshold:typeof u=="number"?u:Me[u]});return h.forEach(N=>y.observe(N)),()=>y.disconnect()}function Be(n,{root:a,margin:s,amount:d,once:u=!1}={}){const[h,r]=f.exports.useState(!1);return f.exports.useEffect(()=>{if(!n.current||u&&h)return;const H=()=>(r(!0),u?void 0:()=>r(!1)),y={root:a&&a.current||void 0,margin:s,amount:d==="some"?"any":d};return ke(n.current,H,y)},[a,n,s,u]),h}const C={visible:{opacity:1,y:0,transition:{staggerChildren:.2}},hidden:{opacity:0,y:15}},Pe=()=>{const[n,a]=f.exports.useState({identifier:{value:"",type:"text",placeholder:"Username or Email",prefix:B},password:{value:"",type:"password",placeholder:"password",prefix:j}}),[s,d]=f.exports.useState(!1),u=se(),h=()=>{s||(d(!0),L.post("api/auth/login",{identifier:n.identifier.value.trim(),password:n.password.value.trim()}).then(r=>{u(K.login(r.data))}).catch(r=>{r&&r.response&&r.response.data&&r.response.data.servedError&&u(W.notify({type:"error",message:r.response.data.message})),console.log("signin error",r)}).finally(()=>{d(!1)}))};return t(x.section,{initial:{scale:1.1,opacity:0},animate:{scale:1,opacity:1},exit:{scale:1.1,opacity:0},className:w.Signin,children:_("div",{className:w.SigninBox,children:[t("header",{className:w.Header,children:"Login"}),t(x.div,{className:w.InputBox,variants:C,animate:"visible",initial:"hidden",children:Object.keys(n).map(r=>{let H=M;const y=n[r].prefix;return n[r].type==="password"&&(H=M.Password),t(x.div,{variants:C,className:w.InputHolder,children:t(H,{prefix:t(y,{className:w.PrefixIcon}),onKeyDown:N=>{N.key==="Enter"&&h()},value:n[r].value,onChange:N=>{a(v=>{const I={...v};return I[r]={...v[r]},I[r].value=N.target.value,I})},className:w.Input,placeholder:n[r].placeholder})})})}),t(P,{className:w.Button,type:"primary",onClick:h,loading:s,children:"login"}),_("footer",{className:w.Suggestion,children:[t("span",{className:w.SuggestionText,children:"Dont have an account? "}),t(E,{className:w.SuggestionLink,to:"/signup",children:"sign up"})]})]})})},$e="_Signin_wplb4_1",Ce="_SigninBox_wplb4_6",Oe="_Header_wplb4_16",Te="_InputBox_wplb4_22",Ue="_InputHolder_wplb4_29",Ee="_InputError_wplb4_29",Fe="_Input_wplb4_22",Ae="_PrefixIcon_wplb4_50",De="_Button_wplb4_59",Re="_Suggestion_wplb4_73",je="_SuggestionLink_wplb4_76",m={Signin:$e,SigninBox:Ce,Header:Oe,InputBox:Te,InputHolder:Ue,InputError:Ee,Input:Fe,PrefixIcon:Ae,Button:De,Suggestion:Re,SuggestionLink:je},O={visible:{opacity:1,y:0,transition:{staggerChildren:.1}},hidden:{opacity:0,y:15}},ze=()=>{const n=f.exports.useRef(0),a=f.exports.useRef(0),[s,d]=f.exports.useState({feilds:{init:function(){for(let i in this)typeof this[i]=="object"&&(this[i].parent=this);return delete this.init,this},username:{value:"",validation:i=>{const o=i.trim(),e={isValid:!0,errorMessage:""};if(o.length<4)return e.isValid=!1,e.errorMessage="username must be longer than 3 characters",g("username",e);if(o.length>11)return e.isValid=!1,e.errorMessage="username must be less than 11 characters",g("username",e);I("username",!0),n.current++;const c=n.current;L.get("/api/auth/usernameExist/"+o).then(l=>{l.data&&(e.isValid=!1,e.errorMessage="username already exists!")}).catch(l=>{e.isValid=!1,e.errorMessage="connection error"}).finally(()=>{n.current===c&&g("username",e)})},isValid:!1,errorMessage:"",isTouched:!1,isLoading:!1,input_config:{type:"text",prefix:t(B,{className:m.PrefixIcon}),placeHolder:"Username",maxLength:25}},personal_name:{value:"",validation:i=>{const o=i.trim(),e={isValid:!0,errorMessage:""};if(o.length<4)return e.isValid=!1,e.errorMessage="name must be longer than 3 characters",g("personal_name",e);g("personal_name",e)},isValid:!1,errorMessage:"",isTouched:!1,isLoading:!1,input_config:{type:"text",prefix:t(B,{className:m.PrefixIcon}),placeHolder:"Personal Name",maxLength:25}},email:{value:"",validation:i=>{const o=i.trim(),e={isValid:!0,errorMessage:""};if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o))return e.isValid=!1,e.errorMessage="invalid email",g("email",e);I("email",!0),a.current++;const c=a.current;L.get("/api/auth/emailExist/"+o).then(l=>{l.data&&(e.isValid=!1,e.errorMessage="email already exists!")}).catch(l=>{e.isValid=!1,e.errorMessage="connection error"}).finally(()=>{a.current===c&&g("email",e)})},isValid:!1,errorMessage:"",isTouched:!1,isLoading:!1,input_config:{type:"text",prefix:t("span",{className:m.PrefixIcon,children:"@"}),placeHolder:"Email",maxLength:60}},password:{value:"",validation:function(i){const o=i.trim(),e={isValid:!0,errorMessage:""};if(this.parent.confrim_password.validation(this.parent.confrim_password.value),o.length<8||!/\d/.test(o)||!/[a-z]/.test(o)||!/[A-Z]/.test(o))return e.isValid=!1,e.errorMessage="minimum eight characters, at least one uppercase letter, one lowercase letter and one number",g("password",e);g("password",e)},isValid:!1,errorMessage:"",isTouched:!1,isLoading:!1,input_config:{type:"input.password",prefix:t(Ve,{className:m.PrefixIcon}),placeHolder:"Password",visibilityToggle:!0,maxLength:25}},confrim_password:{value:"",validation:function(i){const o=i.trim(),e={isValid:!0,errorMessage:""};if(o!==this.parent.password.value.trim())return e.isValid=!1,g("confrim_password",e);g("confrim_password",e)},isValid:!1,errorMessage:"",isTouched:!1,isLoading:!1,input_config:{type:"password",prefix:t(j,{className:m.PrefixIcon}),placeHolder:"Confirm Password",visibilityToggle:!1,maxLength:25}}}.init()}),[u,h]=f.exports.useState(!1),r=F();function H(){if(u)return;if(!y()){N();return}h(!0);const i={};for(let o in s.feilds)i[o]=s.feilds[o].value.trim();L.post("api/auth/signup",i).then(o=>{r("/signin")}).catch(o=>{console.log("signup error ",o)}).finally(()=>{h(!1)})}function y(){for(let i in s.feilds)if(!s.feilds[i].isValid)return!1;return!0}function N(){for(let i in s.feilds)s.feilds[i].isValid||s.feilds[i].validation(s.feilds[i].value)}function v(i){i.init=function(){for(let o in this)typeof this[o]=="object"&&(this[o].parent=this);delete this.init},i.init()}function I(i,o){d(e=>{const c={...e},l={...c.feilds},p={...l[i]};return p.isTouched=!0,p.isValid=!1,p.isLoading=o,l[i]=p,v(l),c.feilds=l,c})}function g(i,o){d(e=>{const c={...e},l={...c.feilds},p={...l[i]};return p.isTouched=!0,p.isValid=o.isValid,p.errorMessage=o.errorMessage,p.isLoading=!1,l[i]=p,v(l),c.feilds=l,c})}function q(i,o){d(e=>{const c={...e},l={...c.feilds},p={...l[i]};return p.isTouched=!0,p.value=o,l[i]=p,v(l),c.feilds=l,c}),s.feilds[i].validation(o)}return t(x.section,{initial:{scale:1.1,opacity:0},animate:{scale:1,opacity:1},exit:{scale:1.1,opacity:0},className:m.Signin,children:_("div",{className:m.SigninBox,children:[t("header",{className:m.Header,children:"Sign Up"}),t(x.div,{className:m.InputBox,variants:O,initial:"hidden",animate:"visible",children:Object.keys(s.feilds).map((i,o)=>{const e=s.feilds[i],c=e.input_config,l={onChange:J=>{q(i,J.target.value)},value:e.value,maxLength:c.maxLength,placeholder:c.placeHolder,className:m.Input,status:!e.isValid&&e.isTouched&&!e.isLoading?"error":"normal",prefix:c.prefix,suffix:e.isValid?t(ae,{style:{color:"green"}}):e.isLoading?t(oe,{style:{color:"var(--primary-soft)"}}):null};let p=M;return c.type==="input.password"&&(p=M.Password,l.visibilityToggle=c.visibilityToggle),_(x.div,{className:m.InputHolder,variants:O,children:[e.errorMessage?t("div",{className:m.InputError,children:e.errorMessage}):null,t(p,{...l,type:c.type})]},i)})}),t(P,{className:m.Button,type:"primary",loading:u,onClick:H,children:"Sign Up"}),_("footer",{className:m.Suggestion,children:[_("span",{className:m.SuggestionText,children:["Already have an account?"," "]}),t(E,{className:m.SuggestionLink,to:"/signin",children:"login"})]})]})})},qe={hide:{x:"-500%",rotate:"-360deg",backgroundColor:"red"},show:{x:0,rotate:0,backgroundColor:"blue"},enlarge:{scale:1.2}},S=()=>{const n=f.exports.useRef();return Be(n,{margin:"-120px"}),t(x.div,{ref:n,style:{width:"10rem",height:"10rem"},variants:qe,animate:"hide",whileInView:"show",whileHover:"enlarge"})},Je="_Main_1xerc_1",Ke="_FirstHandler_1xerc_1",We="_Description_1xerc_7",Ze="_Visualisation_1xerc_13",Ge="_ViewBox_1xerc_18",T={Main:Je,FirstHandler:Ke,Description:We,Visualisation:Ze,ViewBox:Ge},Qe=()=>{const n=He(0);return console.log("y movement :",n),_(x.div,{initial:{scale:1.1,opacity:0},animate:{scale:1,opacity:1},exit:{scale:1.1,opacity:0},className:T.Main,children:[_(x.section,{className:T.FirstHandler,children:[t(S,{}),t(S,{}),t(S,{}),t(S,{}),t(S,{}),t(S,{}),t(S,{}),t(S,{}),t(S,{}),t(S,{})]}),t(P,{onClick:()=>n.set(n.get()+100),children:"Move it"})]})},Xe="_Home_ekgpi_1",Ye="_Header_ekgpi_8",en="_LogoHolder_ekgpi_20",nn="_Logo_ekgpi_20",tn="_LogoText_ekgpi_29",sn="_NavigationHolder_ekgpi_35",an="_NavigationItem_ekgpi_42",on="_active_ekgpi_54",rn="_Underline_ekgpi_57",ln="_Page_ekgpi_65",V={Home:Xe,Header:Ye,LogoHolder:en,Logo:nn,LogoText:tn,NavigationHolder:sn,NavigationItem:an,active:on,Underline:rn,Page:ln},cn=[{name:"home",to:"/"},{name:"login",to:"/signin"},{name:"about",to:"/about"}],pn=()=>{const n=F(),a=Z();return console.log("main path : ",a.pathname),_("div",{className:V.Home,children:[_(x.header,{className:V.Header,children:[_(x.div,{drag:!0,className:V.LogoHolder,children:[t(re,{className:V.Logo,onClick:()=>{n("/")}}),t($.div,{className:V.LogoText,onClick:()=>{n("/")},children:"ShutApp"})]}),t($.div,{className:V.NavigationHolder,children:cn.map(s=>{const d=a.pathname===s.to;return _(x.div,{whileHover:{y:-2,scale:1.02},className:G({[V.NavigationItem]:!0,[V.active]:d}),onClick:()=>{n(s.to)},children:[s.name,d&&t(x.div,{layoutId:"navigationUnderline",className:V.Underline})]},s.name)})})]}),t("div",{className:V.Page,children:t(le,{initial:!1,mode:"wait",children:_(Q,{location:a,children:[t(k,{path:"/signup",element:t(ze,{})}),t(k,{path:"/signin",element:t(Pe,{})}),t(k,{path:"/*",element:t(Qe,{})})]},a.pathname)})})]})};export{pn as default};
